%div{:id => dom_id_for(@offering, :report), :class => 'item'}
  %h3= "Multiple Choice Report for: #{@offering.name}"
  %div{:id => dom_id_for(@offering, :details), :class => 'content'}
    = accordion_for(@offering, offering_mc_report_summary(@offering)) do
      - @offering.runnable.activities.each_with_index do |activity,activity_num|
        - if activity.multiple_choices.size > 0
          %div
            %span{:style => 'font-weight: bold;'}= "Activity #{activity_num + 1}"
            = " &ndash; #{activity.name}"
          %div{:style => 'padding-left: 10px;'}
            - activity.sections.each_with_index do |section,section_num|
              - if section.multiple_choices.size > 0
                %div
                  %span{:style => 'font-weight: bold;'}= "Section #{section_num + 1}"
                  = " &ndash; #{section.name}"
                %div{:style => 'padding-left: 20px;'}
                  - section.pages.each_with_index do |page,page_num|
                    - multiple_choices = page.multiple_choices
                    - if multiple_choices.size > 0
                      %div
                        %span{:style => 'font-weight: bold;'}= "Page #{page_num + 1}"
                        = " &ndash; #{page.name}"
                      %div{:style => 'padding-left: 30px;'}
                        - multiple_choices.each do |multiple_choice|
                          %div
                            = accordion_for(multiple_choice, offering_details_multiple_choice(@offering, multiple_choice)) do
                              - @learners.sort_by{|learner| [learner.last_name, learner.first_name]}.each do |l|
                                - saveable = multiple_choice_saveable_for_learner(multiple_choice, l)
                                - css_style = saveable.answered? ? 'answered' : 'not_answered'
                                - css_style = saveable.answered_correctly? ? 'correct' : 'incorrect' if saveable.answered?
                                %div{:id => dom_id_for(saveable), :style => "clear: right;", :class => css_style}
                                  %item{:class => css_style}
                                    = l.name
                                  %item{:style => "float: right;", :class => css_style}
                                    = saveable.answer