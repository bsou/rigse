!!! Strict
%html{ "xml:lang" => "en", :lang => "en", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %title
      = @page_title || APP_CONFIG[:site_name]
    %meta{ :content => "text/xhtml; charset=utf-8", "http-equiv" => "content-type" }
    %meta{ :content => "no", "http-equiv" => "imagetoolbar" }
    %meta{ :name => "distribution", :content => "all" }
    %meta{ :name => "robots", :content => "all" }
    %meta{ :name => "resource-type", :content => "document" }
    %meta{ :name => "MSSmartTagsPreventParsing", :content => "true" }
    = stylesheet_link_tag 'app'
    = stylesheet_link_tag 'window'
    = stylesheet_link_tag 'rites-dialog'
    = stylesheet_link_tag 'live_validation'
    / = javascript_include_tag :defaults
    = javascript_include_tag "prototype.js"
    = javascript_include_tag "effects.js"
    = javascript_include_tag "prototype-ui/prototype-ui.js"
    = javascript_include_tag "application.js"
    = javascript_include_tag "dragdrop.js"
    = javascript_include_tag "misc/resizable.js"
    = javascript_include_tag "livepipe/livepipe.js"
    = javascript_include_tag "livepipe/tabs.js"
    = javascript_include_tag "livepipe/window.js"
    = javascript_include_tag "live_validation"
    = javascript_include_tag "controls"
    /[if IE]
      = javascript_include_tag "flotr/excanvas.js"
    = javascript_include_tag "flotr/flotr.js"
    / = javascript_include_tag "in_place_rich_editor/patch_inplaceeditor_1-8-1.js"
    / = javascript_include_tag "in_place_rich_editor/patch_inplaceeditor_editonblank_1-8-1.js"
    / = javascript_include_tag "in_place_rich_editor/inplacericheditor.js"
    = javascript_include_tag "tiny_mce/tiny_mce"
    
    :javascript
      tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        theme_advanced_buttons1     : "justifyleft,justifycenter,justifyright,justifyfull,|,bold,italic,underline,strikethrough,",
        theme_advanced_buttons1_add : "|,fontselect,fontsizeselect|,bullist,numlist,hr|,undo,redo,link,unlink,image",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true
      });
  %body
    
    
    #body2
      /
        For non-visual user agents:
      #top
        %a.hidden.doNotPrint{ :href => "#main_content" }
          Skip to main content.
    #wrapper.wrapper
      = render :partial => 'shared/investigation_trail'
      #header
        %span.left_content
          %h1 RITES Authoring
        %span.right_content
          Welcome
          = "#{current_user.name}."
          - unless current_user.anonymous?
            = link_to 'Preferences', preferences_user_path(current_user)
            \/
            = link_to 'Logout', logout_path
          - else
            = link_to 'Login', login_path
            \/
            = link_to 'Signup', signup_path
            
      #nav_top
        %span.hidden.doNotPrint
          Navigation:
        != "&nbsp;"
        = yield :navigation_trail

            
      #left_nav.nav_menu
        .padded_content
          %ul.nav_menu
            %li= link_to 'Home', home_path
            %li= link_to 'Investigations', investigations_path
            %li= link_to 'GSEs', grade_span_expectations_path
            / %li= link_to 'Data Collectors', data_collectors_path
            / %li= link_to 'Open Responses', open_responses_path
            / %li= link_to 'Xhtmls', xhtmls_path
          %p
            = yield :sidebar
          %hr
          %p
          = render :partial => 'shared/vendor_interface', :locals => { :vendor_interface => current_user.vendor_interface }
          %hr
          %p
            %span.sideBarText
              Rhode Island Technology Enhanced Science 
              %em (RITES) 
              program is a targeted Math-Science Partnership designed to improve secondary science learning statewide.
          %hr
            %p.small
              Validate the
              %a{ :href => "http://validator.w3.org/check/referer" }
                XHTML
              and
              %a{ :href => "http://jigsaw.w3.org/css-validator/check/referer" }
                CSS of this page.
          %hr
            = render :partial => 'shared/site_info'
          


      #content_header.main_content_colors
        = yield :content_header
      #main_content.main_content_colors
        = yield :layout
        - flash.each do |key, message|
          %p{:class=>"flash flash_#{key}"}= message
        


      #footer
        .padded_content
          #footer_left
            Questions/Feedback:
            = mail_to("stephen@concord.org", "Send us an email", :subject => "rights question", :encode => "javascript")
          #footer_right
            / footer text on the right
  #teacher_bottom 
    = link_to_function 'teacher-notes', visual_effect(:toggle_blind, 'some_data',:duration => 0.25)
    #some_data{:style=>"display: none;"}
      = yield :teacher_note