!!! Strict
%html{ "xml:lang" => "en", :lang => "en", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %title
      = @page_title || APP_CONFIG[:site_name]
    %meta{ :content => "text/xhtml; charset=utf-8", "http-equiv" => "content-type" }
    %meta{ :content => "no", "http-equiv" => "imagetoolbar" }
    %meta{ :name => "distribution", :content => "all" }
    %meta{ :name => "robots", :content => "all" }
    %meta{ :name => "resource-type", :content => "document" }
    %meta{ :name => "MSSmartTagsPreventParsing", :content => "true" }
    = stylesheet_link_tag 'base'
    = stylesheet_link_tag 'app'
    = javascript_include_tag :defaults
    = javascript_include_tag "tiny_mce/tiny_mce.js"
    :javascript
      tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        theme_advanced_buttons1 : "justifyleft,justifycenter,justifyright,justifyfull,|,bold,italic,underline,strikethrough,|,fontselect,fontsizeselect",
        theme_advanced_buttons1_add : "|,bullist,numlist,hr|,undo,redo,link,unlink,image",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true
      });
  %body
    #body2
      /
        For non-visual user agents:
      #top
        %a.do_not_display.doNotPrint{ :href => "#main_content" }
          Skip to main content.
      /
        \##### Header #####
      #header
        #super_header.horiz_band
          .right
            %span.do_not_display
              Login and Registration:
            Welcome 
            = "#{current_user.name},"
            - unless current_user.anonymous?
              = link_to 'Logout', logout_path
            - else
              = link_to 'Login', login_path
              or
              = link_to 'Signup', signup_path
        #mid_header
          .logo
            = link_to image_tag('rites.gif', :size => "70x70"), "http://rites.concord.org"
          %h1
            RITES Investigation Template
        #sub_header.horiz_band
          %span.do_not_display
            Navigation:
          .left
            %ul
          .right
            %ul
      #middle_section
        #sidebar
          .lighter_background
            %p.sideBarTitle
              = link_to '&#187; Home', home_path
            %p.sideBarTitle
              = link_to '&#187; Investigations', investigations_path
            %p.sideBarTitle
              = link_to '&#187; Grade Span Expectations', grade_span_expectations_path
            %p.sideBarTitle
              = link_to '&#187; Images', images_path
            / %p.sideBarTitle
            /   = link_to '&#187; Domains', domains_path
            / %p.sideBarTitle
            /   = link_to '&#187; Unifying Themes', unifying_themes_path
            = yield :sidebar
            
            %p
              %span.sideBarText
                Rhode Island Technology Enhanced Science (RITES) program is a targeted Math-Science Partnership designed to improve secondary science learning statewide.
            %p.sideBarTitle
              %a{ :href => "http://confluence.concord.org/display/RITES/Home" }
                RITES Project Wiki
          %div
            %p.sideBarTitle
              Validation
            %span.sideBarText
              Validate the
              %a{ :href => "http://validator.w3.org/check/referer" }
                XHTML
              and
              %a{ :href => "http://jigsaw.w3.org/css-validator/check/referer" }
                CSS
              of this page.
        #content_header_container
          #content_header.horiz_band
            .left
              = yield :left_content_header
            .right
              = yield :right_content_header
        #main_content
          %p{ :style => "color: green" }
            = flash_messages
          = yield :layout
      /
        \##### Footer #####
      .clear_both
      #footer.horiz_band
        .left
          Questions/Feedback:
          = mail_to("stephen@concord.org", "Send us an email", :subject => "diy question", :encode => "javascript")
        .right
          footer text on the right
  = javascript_include_tag "tiny_mce/tiny_mce"
  %script{ :type => "text/javascript" }
    tinyMCE.init({
    mode : "textareas",
    content_css : "/stylesheets/app.css",
    theme : "advanced",
    theme_advanced_buttons1 : "bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright, justifyfull,bullist,numlist,undo,redo,link,unlink,image",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left"
    });
